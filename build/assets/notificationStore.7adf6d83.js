import{s as y,t as N,u as L,r as n,ah as D,v as i,x as s,N as r,P as g}from"./index.328fd7e8.js";y("proyojonuserkey",{});const p=y("proyojonloginuser",{});i.title="Requesting To Server...";const q=N("notification store",()=>{L();const f=n(null),l=n(null),h=n(null),d=n(!1),u=n(!1),t=D({id:null,title:null,description:null,published:!1,link:null}),m=()=>{t.id=null,t.title=null,t.description=null,t.published=!1,t.link=null,d.value=!0},v=o=>{t.id=o._id,t.title=o.title,t.description=o.description,t.published=o.published,t.link=o.link,u.value=!0},c=async()=>{const o={method:"get",url:"api/common_notifications",headers:{"Content-Type":"application/json"}};i.showLoader();try{const e=await s.request(o);f.value=e.data,i.hideLoader(),r.create({position:"center",type:"positive",message:"you have "+e.data.length+" unread notifications"})}catch(e){console.log(e),i.hideLoader()}};return{openCreateNotificationDialog:d,openCreateNotificationManager:m,openEditNotificationDialog:u,openEditNotificationManager:v,notificationInfo:t,notificationList:f,getPublishedNotification:async()=>{const o={method:"get",url:"api/common_notifications",headers:{"Content-Type":"application/json"},params:{published:!0}};try{const e=await s.request(o);l.value=e.data,h.value=e.data.notifications.filter(a=>g.getDateDiff(new Date,a.updatedAt,"days")<=6),l.value=e.data.notifications.filter(a=>g.getDateDiff(new Date,a.updatedAt,"days")>=7)}catch(e){console.log(e)}},last7DaysNotification:h,publishedNotification:l,getNotificationList:c,createNotification:async()=>{const o=t,e={method:"post",url:"api/common_notifications",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.value.token}`},data:o};i.showLoader();try{const a=await s.request(e);c(),d.value=!1,i.hideLoader(),r.create({position:"center",type:"positive",message:"Notification Created Successfully."})}catch(a){console.log(a),r.create({position:"center",type:"negative",message:a.response.data.message}),i.hideLoader()}},updateNotification:async()=>{const o=t,e={method:"put",url:"api/common_notifications/"+t.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.value.token}`},data:o};i.showLoader();try{const a=await s.request(e);c(),u.value=!1,i.hideLoader()}catch(a){console.log(a),r.create({position:"center",type:"negative",message:a.response.data.message}),i.hideLoader()}},deleteNotification:async()=>{const o={method:"delete",url:"api/common_notifications/"+t.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.value.token}`}};i.showLoader();try{const e=await s.request(o);c(),i.hideLoader()}catch(e){console.log(e),r.create({position:"center",type:"negative",message:e.response.data.message}),i.hideLoader()}}}});export{q as u};
