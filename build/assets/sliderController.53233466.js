import{Q as k}from"./QImg.f3250621.js";import{t as w,G as B,ah as b,v as i,x as u,N as d,a as n,d as m,e as r,L as I,M as v,z as o,I as f,K as h,O as g,f as _,J as $,C as j}from"./index.f2577fb4.js";import{Q as U}from"./QFile.d2d35120.js";import{w as z}from"./root_url.5e50e74c.js";import"./QChip.aba9d6d9.js";i.title="Requesting To Server...";const D=w("public slider create Update store",()=>{const c=B(),e=b({id:"",slider1:[],slider2:[],slider3:[],slider4:[]});return{getSliderData:async()=>{const t={method:"get",url:"api/sliders",headers:{"Content-Type":"application/json"}};try{const s=await u.request(t);e.id=s.data[0]._id,e.slider1=s.data[0].slider1,e.slider2=s.data[0].slider2,e.slider3=s.data[0].slider3,e.slider4=s.data[0].slider4}catch(s){console.log(s)}},sliderInfo:e,createSliders:async()=>{const t={...e},s={method:"post",url:"api/sliders",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.loginUserInfo.token}`},data:t};i.showLoader();try{const l=await u.request(s);i.hideLoader(),d.create({message:"Successfully Created Banner Image"})}catch(l){console.log(l),i.hideLoader(),d.create({message:"Failed to Create Banner Image"})}},updateSlider:async()=>{const t={...e},s={method:"put",url:"api/sliders/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.loginUserInfo.token}`},data:t};i.showLoader();try{const l=await u.request(s);i.hideLoader(),d.create({message:"Successfully Updated Banner Image",type:"positive",position:"center"})}catch(l){console.log(l),i.hideLoader()}},uploadSliderImage:async(t,s)=>{if(!e[t][s]||typeof e[t][s]=="string")return;const l={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${c.loginUserInfo.token}`},data:{image:e[t][s]}};try{const p=await u.request(l);e[t][s]=p.data}catch(p){console.log(p),d.create({position:"center",type:"negative",message:p.response.data.message})}}}}),L={class:"container-section-py-xs"},q={class:"inner-section"},A={class:"full-width"},Q={class:"fs-16"},V={class:"row q-col-gutter-sm"},T={class:"fs-10"},F={key:0,class:"border-primary border-radius-sm q-pa-sm"},N={class:"flex justify-between"},E={class:"flex justify-end"},O={__name:"sliderController",setup(c){const e=D();e.getSliderData();const y=S=>{d.create({position:"center",type:"negative",message:"Choosen file size too big"})};return(S,C)=>(n(),m("div",L,[r("div",q,[r("div",A,[(n(),m(I,null,v(4,a=>r("div",{key:a},[r("div",Q,"Slider Images For Banner "+g(a),1),r("div",V,[(n(),m(I,null,v(10,t=>r("div",{class:"col-md-6 col-sm-6 col-12",key:t},[r("div",T," Banner "+g(a)+" image "+g(t),1),typeof o(e).sliderInfo[`slider${a}`][t-1]=="string"?(n(),m("div",F,[_(k,{src:o(z)+"/"+o(e).sliderInfo[`slider${a}`][t-1],width:"300px"},null,8,["src"]),r("div",N,[r("div",null,g(o(e).sliderInfo[`slider${a}`][t-1]),1),_(h,{class:"bg-red text-white",dense:"",size:"xs",icon:"edit",onClick:s=>o(e).sliderInfo[`slider${a}`][t-1]=null},null,8,["onClick"])])])):(n(),f(U,{key:1,outlined:"",ref_for:!0,ref:"slider1Img1El",dense:"",modelValue:o(e).sliderInfo[`slider${a}`][t-1],"onUpdate:modelValue":[s=>o(e).sliderInfo[`slider${a}`][t-1]=s,()=>{o(e).uploadSliderImage(`slider${a}`,t-1)}],label:"Add image Max Size 150KB",accept:".jpg, .png, .jpeg","max-total-size":"150000",counter:"",onRejected:y},{prepend:$(()=>[_(j,{name:"cloud_upload"})]),_:2},1032,["modelValue","onUpdate:modelValue"]))])),64))])])),64)),r("div",E,[o(e).sliderInfo.id?(n(),f(h,{key:1,label:"Update",onClick:o(e).updateSlider},null,8,["onClick"])):(n(),f(h,{key:0,label:"Create",onClick:o(e).createSliders},null,8,["onClick"]))])])])]))}};export{O as default};
