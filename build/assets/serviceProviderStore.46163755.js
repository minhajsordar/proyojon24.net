import{t as F,s as U,bs as Q,r as c,aE as W,aG as X,aI as Y,aJ as Z,aL as ee,u as ie,G as re,bt as oe,ah as b,v as t,x as l,bu as I,N as p}from"./index.98f545c8.js";import{u as E,a as R}from"./serviceCategoryStore.e1b18ed6.js";const ne=F("search service store",()=>{const g=te();E();const u=R();return{updateServiceCategory:()=>{u.getAllServiceCategorys(g.serviceProviderInfo.service._id),u.getServiceCategoryList()},updateServiceCategoryForService:()=>{var y;u.getAllServiceCategorys((y=u==null?void 0:u.filteredByServiseId)==null?void 0:y._id)},updateServiceCategoryOnServiceProviderTable:()=>{u.getAllServiceCategorys(u.filteredByServiseId._id)}}});U("proyojonuserkey",{});const s=U("proyojonloginuser",{});t.title="Requesting To Server...";const te=F("service provider store",()=>{const{t:g}=Q(),u=ne();c(null),W();const T=X(),k=Y(),A=Z(),y=ee(),C=ie();re();const j=E();oe();const f=R(),P=c(!1),D=c(!1),B=c(!1),J=c(1),m=c(null),v=b({imageCover1:null,imageCover2:null,imageCover3:null}),K=c(null),L=c(null),x=c(1),i=b({division:null,district:null,subDistrict:null,union:null,pinlocation:null,exact:{bn:null,en:null}}),w=c([]),q=b({name:{bn:null,en:null},username:null,phone:null,email:null,password:null,password2:null}),e=b({id:null,user:null,name:{bn:null,en:null},description:{bn:null,en:null},serviceImage1:null,serviceImage2:null,serviceImage3:null,serviceCategory:null,service:null,image:null,rankCount:1,serviceProviderLocation:{division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},degree:{bn:null,en:null},serviceTitle:{bn:null,en:null},phoneNumber1:null,phoneNumber2:null,facebook:null,whatsapp:null,imo:null,twitter:null,email:null,experience:null,keywords:null,registrationNo:null}),N=()=>{m.value=null,v.imageCover1=null,v.imageCover2=null,v.imageCover3=null,e.user=null,e.name={bn:null,en:null},e.description={bn:null,en:null},e.serviceImage1=null,e.serviceImage2=null,e.serviceImage3=null,e.image=null,e.service=null,e.serviceCategory=null,e.rankCount=1,i.division=null,i.district=null,i.subDistrict=null,i.union=null,i.pinlocation=null,i.exact={bn:null,en:null},e.serviceProviderLocation={division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},e.degree={bn:null,en:null},e.extraCources={bn:null,en:null},e.serviceTitle={bn:null,en:null},e.serviceList=[{bn:null,en:null}],e.specialties={bn:null,en:null},e.phoneNumber1=null,e.phoneNumber2=null,e.facebook=null,e.whatsapp=null,e.imo=null,e.email=null,e.experience=null,e.twitter=null,e.keywords=[]},M=()=>{N(),P.value=!0},G=o=>{["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","serviceTitle","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"].forEach((r,a)=>{e[r]=o[r]}),e.id=o==null?void 0:o._id,e.service=j.serviceList.services.filter(r=>r._id==e.service)[0],e.serviceCategory=f.serviceCategoryList.serviceCategorys.filter(r=>r._id==e.serviceCategory)[0],v.imageCover1={name:e.serviceImage1},v.imageCover2={name:e.serviceImage2},v.imageCover2={name:e.serviceImage3},m.value={name:e.icon},i.division=o.serviceProviderLocation.division,i.district=o.serviceProviderLocation.district,i.subDistrict=o.serviceProviderLocation.subDistrict,i.union=o.serviceProviderLocation.union,i.pinlocation=o.serviceProviderLocation.pinlocation,u.updateServiceCategory(),D.value=!0,i.division&&T.getAllDistricts(i.division._id),i.district&&k.getAllSubDistricts(i.district._id),i.subDistrict&&A.getAllUnions(i.subDistrict._id),i.union&&y.getAllPinlocations(i.union._id)},V=o=>{const n=["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","degree","extraCources","serviceTitle","serviceList","specialties","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"];B.value=!0,n.forEach((r,a)=>{e[r]=o[r]}),e.id=o==null?void 0:o._id,e.service=j.serviceList.services.filter(r=>r._id==e.service)[0],e.serviceCategory=f.serviceCategoryList.serviceCategorys.filter(r=>r._id==e.serviceCategory)[0],v.imageCover1={name:e.serviceImage1},v.imageCover2={name:e.serviceImage2},v.imageCover2={name:e.serviceImage3},m.value={name:e.icon},i.division=o.serviceProviderLocation.division,i.district=o.serviceProviderLocation.district,i.subDistrict=o.serviceProviderLocation.subDistrict,i.union=o.serviceProviderLocation.union,i.pinlocation=o.serviceProviderLocation.pinlocation},O=c(null),z=c([]),_=c(!1);c(0);const H=async o=>{_.value=!0;const n={};o&&(n.serviceCategoryId=o);const r={method:"get",url:"api/service_providers/all",headers:{"Content-Type":"application/json"},params:n};t.showLoader();try{const a=await l.request(r);O.value=a.data.filter(d=>d.suggested==!1),z.value=a.data.filter(d=>d.suggested==!0),t.hideLoader(),_.value=!1}catch(a){console.log(a),t.hideLoader(),_.value=!1}},h=async()=>{const o={pageNumber:x.value};L.value?o.serviceCategoryId=L.value._id:f.filteredByServiseId&&(o.serviceId=f.filteredByServiseId._id);const n={method:"get",url:"api/service_providers/",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},params:o};t.showLoader();try{const r=await l.request(n);r.data.serviceProviders.sort((a,d)=>a.order-d.order),w.value=r.data,t.hideLoader()}catch(r){console.log(r),t.hideLoader()}},$=c(null),S=c(!1);return{openServiceProviderEditDialog:D,openServiceProviderEditDialogManager:G,openServiceProviderPreviewDialog:B,openServiceProviderPreviewDialogManager:V,openServiceProviderCreateDialog:P,openServiceProviderCreateDialogManager:M,allServiceProvidersList:O,allServiceProvidersListLoading:_,suggestedServiceProvidersList:z,getPublicServiceProviders:H,addToSuggestionServiceProvider:async o=>{const n={method:"put",url:"api/service_providers/suggest/"+o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{suggested:!0}};t.showLoader();try{const r=await l.request(n);h(),t.hideLoader()}catch(r){console.log(r),p.create({position:"center",type:"negative",message:JSON.stringify(r)}),t.hideLoader()}},removeFromSuggestionServiceProvider:async o=>{const n={method:"put",url:"api/service_providers/suggest/"+o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{suggested:!1}};t.showLoader();try{const r=await l.request(n);h(),t.hideLoader()}catch(r){console.log(r),p.create({position:"center",type:"negative",message:r.response.data.message}),t.hideLoader()}},paginationCurrent:J,serviceProvider:$,serviceProviderLoading:S,getServiceProviderById:async o=>{S.value=!0;const n={method:"get",url:"api/service_providers/"+o,headers:{"Content-Type":"application/json"}};t.showLoader();try{const r=await l.request(n);$.value=r.data,t.hideLoader(),S.value=!1}catch(r){console.log(r),t.hideLoader(),S.value=!1}},increaseServiceProviderView:async o=>{const n={method:"put",url:"api/service_providers/service_provider_view/"+o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{_id:o}};try{const r=await l.request(n)}catch(r){console.log(r)}},serviceProviderPage:x,serviceProviderList:w,serviceProviderInfo:e,serviceProviderRegisterInfo:q,getServiceProviderList:h,createServiceProvider:async()=>{var r,a;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(r=i.union)!=null&&r._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(a=i.pinlocation)!=null&&a._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,s.value.permission=="admin"||s.value.permission=="superAdmin"||s.value.permission!=="self"||(e.user=s.value._id);const o=e,n={method:"post",url:"api/service_providers",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:o};t.showLoader();try{const d=await l.request(n);P.value=!1,s.value.permission=="admin"&&h(),I.create({title:g("create_service_provider_success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{C.push("/profile")}),t.hideLoader()}catch(d){console.log(d),p.create({position:"center",type:"negative",message:d.response.data.message}),t.hideLoader()}},createUserAndServiceProvider:async()=>{var r,a;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(r=i.union)!=null&&r._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(a=i.pinlocation)!=null&&a._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,s.value.permission=="admin"||s.value.permission=="superAdmin"||s.value.permission!=="self"||(e.user=s.value._id);const o={...e,...q},n={method:"post",url:"api/service_providers/user_and_provider",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:o};console.log(o),t.showLoader();try{const d=await l.request(n);P.value=!1,s.value.permission=="admin"&&h(),I.create({title:g("create_service_provider_success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{C.push("/profile")}),t.hideLoader()}catch(d){console.log(d),p.create({position:"center",type:"negative",message:d.response.data.message}),t.hideLoader()}},updateServiceProvider:async()=>{e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id,e.serviceProviderLocation.pinlocation=i.pinlocation,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id;const o=e,n={method:"put",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:o};t.showLoader();try{const r=await l.request(n);D.value=!1,t.hideLoader(),I.create({title:g("success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{C.push("/profile")})}catch(r){console.log(r),t.hideLoader(),p.create({position:"center",type:"negative",message:r})}},deleteServiceProvider:async()=>{const o={method:"delete",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`}};t.showLoader();try{const n=await l.request(o);h(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:JSON.stringify(n)}),t.hideLoader()}},serviceProviderLocationR:i,emptyServiceProviderInfo:N,imageIcon:m,imageCover:v,uploadIcon:async()=>{if(!m.value||typeof m.value=="string"||typeof m.value=="Object")return;e.icon;const o={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.value.token}`},data:{image:m.value}};try{const n=await l.request(o);e.image=n.data}catch(n){console.log(n),p.create({position:"center",type:"negative",message:n.response.data.message})}},selectedServiceCategory:K,uploadCoverImage:async(o,n)=>{if(!v[o]||typeof v[o]=="string")return;const r={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.value.token}`},data:{image:v[o]}};try{const a=await l.request(r);e[n]=a.data}catch(a){console.log(a),p.create({position:"center",type:"negative",message:a.response.data.message})}},filteredByServiseCategoryId:L,getFilteredServiceProviderByServiceCategory:async()=>{const o={method:"get",url:"api/service_providers/service_category/"+L.value._id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},params};t.showLoader();try{const n=await l.request(o);n.data.serviceProviders.sort((r,a)=>r.order-a.order),w.value=n.data,t.hideLoader()}catch(n){console.log(n),t.hideLoader()}},addToTopSuggestionServiceProvider:async o=>{const n={method:"put",url:"api/service_providers/suggest/"+o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{topSuggested:!0}};t.showLoader();try{const r=await l.request(n);h(),t.hideLoader()}catch(r){console.log(r),p.create({position:"center",type:"negative",message:r.response.data.message}),t.hideLoader()}},removeFromTopSuggestionServiceProvider:async o=>{const n={method:"put",url:"api/service_providers/suggest/"+o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{topSuggested:!1}};t.showLoader();try{const r=await l.request(n);h(),t.hideLoader()}catch(r){console.log(r),p.create({position:"center",type:"negative",message:r.response.data.message}),t.hideLoader()}}}});export{ne as a,te as u};
