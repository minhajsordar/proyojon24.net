import{an as S,M as b,r as s,H as C}from"./index.7f914605.js";import{api as c}from"./axios.3a61adb8.js";import{c as f,u as L,l as t}from"./authStore.497312fd.js";f("proyojonuserkey",{});f("proyojonloginuser",{});t.title="Requesting To Server...";const $=S("service store",()=>{b();const i=L(),p=s(!1),v=s(!1),g=s(!1),l=s(null),d=s(null),m=s([{id:"demo service id",user:"demo service user",name:{bn:"demo service bn name",en:"demo service en name"},description:{bn:"demo service bn description",en:"demo service en description"},coverImage:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/cleaning-services-facebook-cover-design-template-11e0ad57b482437f05c97bce49fb2281_screen.jpg",icon:"https://banner2.cleanpng.com/20180823/wk/kisspng-computer-icons-service-user-travel-ims-an-amadeus-setting-svg-png-icon-free-download-1999-2-onl-5b7f0a40a5df71.0483892015350523526794.jpg",viewCount:0}]),e=C({id:null,user:null,name:{bn:null,en:null},description:{bn:null,en:null},coverImage:null,icon:null,viewCount:0,order:0}),h=()=>{e.id=null,e.user=null,e.name={bn:null,en:null},e.description={bn:null,en:null},e.coverImage=null,e.icon=null,e.viewCount=0,e.order=0},I=()=>{h(),p.value=!0},y=n=>{const o=["name","description","coverImage","icon","viewCount","order"];v.value=!0,e.id=n==null?void 0:n._id,o.forEach((a,r)=>{e[a]=n[a]}),d.value={name:e.coverImage},l.value={name:e.icon}},w=n=>{const o=["name","description","coverImage","icon","viewCount","order"];g.value=!0,e.id=n==null?void 0:n._id,o.forEach((a,r)=>{e[a]=n[a]})},u=async()=>{const n={method:"get",url:"api/services/",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.loginUserInfo.token}`}};t.showLoader();try{const o=await c.request(n);o.data.services.sort((a,r)=>a.order-r.order),m.value=o.data,t.hideLoader()}catch(o){console.log(o),t.hideLoader()}};return{openServiceEditDialog:v,openServiceCreateDialog:p,openServiceEditDialogManager:y,openServicePreviewDialog:g,openServicePreviewDialogManager:w,openServiceCreateDialogManager:I,serviceList:m,serviceInfo:e,getServiceList:u,createService:async()=>{const n=e,o={method:"post",url:"api/services",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.loginUserInfo.token}`},data:n};t.showLoader();try{const a=await c.request(o);p.value=!1,u(),t.hideLoader()}catch(a){console.log(a),t.hideLoader()}},updateService:async()=>{const n=["name","description","coverImage","icon","viewCount","order"],o={};n.forEach((r,z)=>{e[r]instanceof Object?e[r].bn&&e[r].bn&&(o[r]=e[r]):e[r]&&(o[r]=e[r])});const a={method:"put",url:"api/services/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.loginUserInfo.token}`},data:o};t.showLoader();try{const r=await c.request(a);v.value=!1,u(),t.hideLoader()}catch(r){console.log(r),t.hideLoader()}},deleteService:async()=>{const n={method:"delete",url:"api/services/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.loginUserInfo.token}`}};t.showLoader();try{const o=await c.request(n);u(),t.hideLoader()}catch(o){console.log(o),t.hideLoader()}},imageIcon:l,imageCover:d,uploadIcon:async()=>{if(!l.value)return;e.icon;const n={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i.loginUserInfo.token}`},data:{image:l.value}};try{const o=await c.request(n);e.icon=o.data}catch(o){console.log(o)}},uploadCoverImage:async()=>{if(!d.value)return;const n={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i.loginUserInfo.token}`},data:{image:d.value}};try{const o=await c.request(n);e.coverImage=o.data}catch(o){console.log(o)}}}});export{$ as u};
