import{s as $,t as B,u as w,H as T,r as m,v as j,C as a,x as L,N as D,bp as z,aP as M,G as Y,I as Q,o as U,a as _,d as S,e as t,f as d,K as A,P as i,_ as I,M as N,O,z as p,aA as R,B as K,dt as E,R as q,L as C}from"./index.93259f7d.js";import{Q as F}from"./QMarkupTable.64f86c3d.js";import{u as V}from"./use-quasar.0d0cd6da.js";import{u as G}from"./use-meta.7d83ebdc.js";import"./QItem.6ebcb469.js";import"./QSelect.dc819f79.js";/* empty css                                                                   */import"./QChip.5c815d28.js";import"./position-engine.27f94045.js";$("proyojonuserkey",{});const k=$("proyojonloginuser",{});j.title="Requesting To Server...";const H=B("service provider pending store",()=>{w(),T(),m(1),m(1);const f=m([]),o=m(!1),u=async()=>{const n={method:"get",url:"api/service_providers/pending_list",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.value.token}`}};a("get-service-providers-pendinglist").showLoading(),o.value=!0;try{const s=await L.request(n);f.value=s.data,o.value=!1,a("get-service-providers-pendinglist").hideLoading()}catch(s){console.log(s),o.value=!1,a("get-service-providers-pendinglist").hideLoading()}};return{serviceProviderPendingList:f,serviceProviderPendingListLoading:o,getServiceProviderPendingList:u,approveServiceProviderProfile:async(n,s)=>{const c={method:"patch",url:"api/service_providers/"+n,headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.value.token}`},data:{approved:!0,dataCollectorId:s}};a("patch-service-providers").showLoading();try{const l=await L.request(c);u(),a("patch-service-providers").hideLoading()}catch(l){console.log(l),a("patch-service-providers").hideLoading(),D.create({position:"center",type:"negative",message:l.response.data.message}),j.hideLoader()}},rejectServiceProviderProfile:async(n,s,c)=>{const l={method:"patch",url:"api/service_providers/"+n,headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.value.token}`},data:{rejected:!0,rejectNote:c,dataCollectorId:s}};a("patch-service-providers").showLoading();try{const g=await L.request(l);u(),a("patch-service-providers").hideLoading()}catch(g){console.log(g),a("patch-service-providers").hideLoading(),D.create({position:"center",type:"negative",message:g.response.data.message}),j.hideLoader()}}}}),x={class:"container-section-py-xs"},J={class:"inner-section"},W={class:"full-width"},X={class:"fs-18"},Z={class:"bg-blue-grey-2"},de={__name:"serviceProviderPendingList",setup(f){const o=H();o.getServiceProviderPendingList(),$("proyojonloginuser",{});const u=w(),v=T(),y=V(),{t:n}=z(),s=M();Y(s);const c=Q();m("self");const l=(e,h)=>{y.dialog({title:n("confirm"),message:"Are you sure to approved this?",cancel:!0,persistent:!0}).onOk(()=>{o.approveServiceProviderProfile(e,h),console.log(">>>> OK")})},g=(e,h)=>{y.dialog({title:n("reject"),message:"Are you sure to reject this?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(r=>{o.rejectServiceProviderProfile(e,h,r),console.log(">>>> OK",r)})};return U(()=>{var e;v.checkLogin(),["superAdmin","admin","district","division","subDistrict","union"].includes((e=v==null?void 0:v.loginUserInfo)==null?void 0:e.permission)||u.push("/profile")}),G({title:"User List",titleTemplate:e=>`${e} - Proyojon24.net`,meta:{description:{name:"description",content:"Page 1"},keywords:{name:"keywords",content:"proyojon24 services service-provider"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},ogTitle:{property:"og:title",template(e){return`${e} - Proyojon24.net`}}}}),(e,h)=>(_(),S("div",x,[t("div",J,[t("div",W,[d(R,{class:"border-primary q-pa-md"},{default:A(()=>[t("div",null,[t("div",X,i(e.$t("headermenus.pending_list")),1),d(I,{class:"q-my-sm"}),d(F,{flat:"",bordered:"",separator:"cell",class:"text-left"},{default:A(()=>[t("thead",Z,[t("tr",null,[t("th",null,i(e.$t("serial")),1),t("th",null,i(e.$t("name")),1),t("th",null,i(e.$t("datetime")),1),t("th",null,i(e.$t("action")),1)])]),t("tbody",null,[(_(!0),S(N,null,O(p(o).serviceProviderPendingList,(r,P)=>(_(),S("tr",{key:P,class:K({"bg-blue-grey-1":P%2!=0})},[t("td",null,i(p(E)(String(P+1),p(c).language)),1),t("td",null,i(r.name[p(c).language]),1),t("td",null,[t("p",null," Created At: "+i(p(q).formatDate(r.createdAt,"YYYY-MM-DD")),1),t("p",null," Updated At: "+i(p(q).formatDate(r.updatedAt,"YYYY-MM-DD")),1)]),t("td",null,[d(C,{class:"q-ml-xs",label:e.$t("preview"),size:"sm",dense:"",color:"blue-grey-10",onClick:b=>e.$router.push("/service_provider_preview/"+r._id)},null,8,["label","onClick"]),d(C,{class:"q-ml-xs",label:e.$t("approved"),size:"sm",dense:"",color:"positive",onClick:b=>l(r._id,r.dataCollector)},null,8,["label","onClick"]),d(C,{class:"q-ml-xs",label:e.$t("reject"),size:"sm",dense:"",color:"negative",onClick:b=>g(r._id,r.dataCollector)},null,8,["label","onClick"])])],2))),128))])]),_:1})])]),_:1})])])]))}};export{de as default};
