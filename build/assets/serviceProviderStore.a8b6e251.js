import{t as K,s as R,bs as ee,r as l,aE as ie,aG as re,aI as oe,aJ as ne,aL as te,u as se,H as ae,bt as ce,ai as D,v as t,C as j,x as v,bu as B,N as p}from"./index.ac7231d3.js";import{u as J,a as M}from"./serviceCategoryStore.d1d93792.js";const le=K("search service store",()=>{const g=ve();J();const u=M();return{updateServiceCategory:()=>{u.getAllServiceCategorys(g.serviceProviderInfo.service._id),u.getServiceCategoryList()},updateServiceCategoryForService:()=>{var b;u.getAllServiceCategorys((b=u==null?void 0:u.filteredByServiseId)==null?void 0:b._id)},updateServiceCategoryOnServiceProviderTable:()=>{u.getAllServiceCategorys(u.filteredByServiseId._id)}}});R("proyojonuserkey",{});const s=R("proyojonloginuser",{});t.title="Requesting To Server...";const ve=K("service provider store",()=>{const{t:g}=ee(),u=le();l(null),ie();const x=re(),N=oe(),q=ne(),b=te(),I=se();ae();const O=J(),c=ce(),P=M(),S=l(!1),T=l(!1),z=l(!1),V=l(1),m=l(null),d=D({imageCover1:null,imageCover2:null,imageCover3:null}),G=l(null),C=l(null),$=l(1),i=D({division:null,district:null,subDistrict:null,union:null,pinlocation:null,exact:{bn:null,en:null}}),k=l([]),F=D({name:{bn:null,en:null},username:null,phone:null,email:null,password:null,password2:null}),e=D({id:null,user:null,name:{bn:null,en:null},description:{bn:null,en:null},serviceImage1:null,serviceImage2:null,serviceImage3:null,serviceCategory:null,service:null,image:null,rankCount:1,serviceProviderLocation:{division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},degree:{bn:null,en:null},serviceTitle:{bn:null,en:null},phoneNumber1:null,phoneNumber2:null,facebook:null,whatsapp:null,imo:null,twitter:null,email:null,experience:null,keywords:null,registrationNo:null}),U=()=>{m.value=null,d.imageCover1=null,d.imageCover2=null,d.imageCover3=null,e.user=null,e.name={bn:null,en:null},e.description={bn:null,en:null},e.serviceImage1=null,e.serviceImage2=null,e.serviceImage3=null,e.image=null,e.service=null,e.serviceCategory=null,e.rankCount=1,i.division=null,i.district=null,i.subDistrict=null,i.union=null,i.pinlocation=null,i.exact={bn:null,en:null},e.serviceProviderLocation={division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},e.degree={bn:null,en:null},e.extraCources={bn:null,en:null},e.serviceTitle={bn:null,en:null},e.serviceList=[{bn:null,en:null}],e.specialties={bn:null,en:null},e.phoneNumber1=null,e.phoneNumber2=null,e.facebook=null,e.whatsapp=null,e.imo=null,e.email=null,e.experience=null,e.twitter=null,e.keywords=[]},H=()=>{U(),S.value=!0},Q=r=>{["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","serviceTitle","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"].forEach((n,a)=>{e[n]=r[n]}),e.id=r==null?void 0:r._id,e.service=O.serviceList.services.filter(n=>n._id==e.service)[0],e.serviceCategory=P.serviceCategoryList.serviceCategorys.filter(n=>n._id==e.serviceCategory)[0],d.imageCover1={name:e.serviceImage1},d.imageCover2={name:e.serviceImage2},d.imageCover2={name:e.serviceImage3},m.value={name:e.icon},i.division=r.serviceProviderLocation.division,i.district=r.serviceProviderLocation.district,i.subDistrict=r.serviceProviderLocation.subDistrict,i.union=r.serviceProviderLocation.union,i.pinlocation=r.serviceProviderLocation.pinlocation,u.updateServiceCategory(),T.value=!0,i.division&&x.getAllDistricts(i.division._id),i.district&&N.getAllSubDistricts(i.district._id),i.subDistrict&&q.getAllUnions(i.subDistrict._id),i.union&&b.getAllPinlocations(i.union._id)},W=r=>{const o=["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","degree","extraCources","serviceTitle","serviceList","specialties","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"];z.value=!0,o.forEach((n,a)=>{e[n]=r[n]}),e.id=r==null?void 0:r._id,e.service=O.serviceList.services.filter(n=>n._id==e.service)[0],e.serviceCategory=P.serviceCategoryList.serviceCategorys.filter(n=>n._id==e.serviceCategory)[0],d.imageCover1={name:e.serviceImage1},d.imageCover2={name:e.serviceImage2},d.imageCover2={name:e.serviceImage3},m.value={name:e.icon},i.division=r.serviceProviderLocation.division,i.district=r.serviceProviderLocation.district,i.subDistrict=r.serviceProviderLocation.subDistrict,i.union=r.serviceProviderLocation.union,i.pinlocation=r.serviceProviderLocation.pinlocation},f=l(null),X=l([]),y=l(!1);l(0);const A=l(1),_=l(""),Y=async r=>{y.value=!0;const o={};r&&(o.serviceCategoryId=r),_.value!==""&&(o.keywords=_.value),o.pageNumber=1,c.browsingLocation.pinlocation?o.pinlocationId=c.browsingLocation.pinlocation._id:c.browsingLocation.union?o.unionId=c.browsingLocation.union._id:c.browsingLocation.subDistrict?o.subDistrictId=c.browsingLocation.subDistrict._id:c.browsingLocation.district?o.districtId=c.browsingLocation.district._id:c.browsingLocation.division&&(o.divisionId=c.browsingLocation.division._id);const n={method:"get",url:"api/service_providers/all",headers:{"Content-Type":"application/json"},params:o};j("get-service-providers-all").showLoading();try{const a=await v.request(n);f.value=a.data,j("get-service-providers-all").hideLoading(),y.value=!1}catch(a){console.log(a),j("get-service-providers-all").hideLoading(),y.value=!1}},Z=async r=>{y.value=!0;const o={};r&&(o.serviceCategoryId=r),_.value!==""&&(o.keywords=_.value),A.value&&(o.pageNumber=A.value),c.browsingLocation.pinlocation?o.pinlocationId=c.browsingLocation.pinlocation._id:c.browsingLocation.union?o.unionId=c.browsingLocation.union._id:c.browsingLocation.subDistrict?o.subDistrictId=c.browsingLocation.subDistrict._id:c.browsingLocation.district?o.districtId=c.browsingLocation.district._id:c.browsingLocation.division&&(o.divisionId=c.browsingLocation.division._id);const n={method:"get",url:"api/service_providers/all",headers:{"Content-Type":"application/json"},params:o};t.showLoader();try{const a=await v.request(n);f.value.page=a.data.page,f.value.pages=a.data.pages,f.value.serviceProviders.push(...a.data.serviceProviders),t.hideLoader(),y.value=!1}catch(a){console.log(a),t.hideLoader(),y.value=!1}},h=async()=>{const r={pageNumber:$.value};C.value?r.serviceCategoryId=C.value._id:P.filteredByServiseId&&(r.serviceId=P.filteredByServiseId._id);const o={method:"get",url:"api/service_providers/",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},params:r};t.showLoader();try{const n=await v.request(o);k.value=n.data,t.hideLoader()}catch(n){console.log(n),t.hideLoader()}},E=l(null),w=l(!1);return{openServiceProviderEditDialog:T,openServiceProviderEditDialogManager:Q,openServiceProviderPreviewDialog:z,openServiceProviderPreviewDialogManager:W,openServiceProviderCreateDialog:S,openServiceProviderCreateDialogManager:H,allServiceProvidersList:f,allServiceProvidersListLoading:y,suggestedServiceProvidersList:X,searchKeyword:_,serviceProviderPageNumber:A,getPublicServiceProviders:Y,getPublicServiceProvidersNextPages:Z,addToSuggestionServiceProvider:async r=>{const o={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{suggested:!0}};t.showLoader();try{const n=await v.request(o);h(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:JSON.stringify(n)}),t.hideLoader()}},removeFromSuggestionServiceProvider:async r=>{const o={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{suggested:!1}};t.showLoader();try{const n=await v.request(o);h(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:n.response.data.message}),t.hideLoader()}},paginationCurrent:V,serviceProvider:E,serviceProviderLoading:w,getServiceProviderById:async r=>{w.value=!0;const o={method:"get",url:"api/service_providers/"+r,headers:{"Content-Type":"application/json"}};t.showLoader();try{const n=await v.request(o);E.value=n.data,t.hideLoader(),w.value=!1}catch(n){console.log(n),t.hideLoader(),w.value=!1}},increaseServiceProviderView:async r=>{const o={method:"put",url:"api/service_providers/service_provider_view/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{_id:r}};try{const n=await v.request(o)}catch(n){console.log(n)}},serviceProviderPage:$,serviceProviderList:k,serviceProviderInfo:e,serviceProviderRegisterInfo:F,getServiceProviderList:h,createServiceProvider:async()=>{var n,a;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(n=i.union)!=null&&n._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(a=i.pinlocation)!=null&&a._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,s.value.permission=="admin"||s.value.permission=="superAdmin"||s.value.permission!=="self"||(e.user=s.value._id);const r=e,o={method:"post",url:"api/service_providers",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:r};t.showLoader();try{const L=await v.request(o);S.value=!1,s.value.permission=="admin"&&h(),B.create({title:g("create_service_provider_success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")}),t.hideLoader()}catch(L){console.log(L),p.create({position:"center",type:"negative",message:L.response.data.message}),t.hideLoader()}},createUserAndServiceProvider:async()=>{var n,a;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(n=i.union)!=null&&n._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(a=i.pinlocation)!=null&&a._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,s.value.permission=="admin"||s.value.permission=="superAdmin"||s.value.permission!=="self"||(e.user=s.value._id);const r={...e,...F},o={method:"post",url:"api/service_providers/user_and_provider",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:r};console.log(r),t.showLoader();try{const L=await v.request(o);S.value=!1,s.value.permission=="admin"&&h(),B.create({title:g("create_service_provider_success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")}),t.hideLoader()}catch(L){console.log(L),p.create({position:"center",type:"negative",message:L.response.data.message}),t.hideLoader()}},updateServiceProvider:async()=>{e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id,e.serviceProviderLocation.pinlocation=i.pinlocation,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id;const r=e,o={method:"put",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:r};t.showLoader();try{const n=await v.request(o);T.value=!1,t.hideLoader(),B.create({title:g("success"),message:g("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")})}catch(n){console.log(n),t.hideLoader(),p.create({position:"center",type:"negative",message:n})}},deleteServiceProvider:async()=>{const r={method:"delete",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`}};t.showLoader();try{const o=await v.request(r);h(),t.hideLoader()}catch(o){console.log(o),p.create({position:"center",type:"negative",message:JSON.stringify(o)}),t.hideLoader()}},serviceProviderLocationR:i,emptyServiceProviderInfo:U,imageIcon:m,imageCover:d,uploadIcon:async()=>{if(!m.value||typeof m.value=="string"||typeof m.value=="Object")return;e.icon;const r={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.value.token}`},data:{image:m.value}};try{const o=await v.request(r);e.image=o.data}catch(o){console.log(o),p.create({position:"center",type:"negative",message:o.response.data.message})}},selectedServiceCategory:G,uploadCoverImage:async(r,o)=>{if(!d[r]||typeof d[r]=="string")return;const n={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.value.token}`},data:{image:d[r]}};try{const a=await v.request(n);e[o]=a.data}catch(a){console.log(a),p.create({position:"center",type:"negative",message:a.response.data.message})}},filteredByServiseCategoryId:C,getFilteredServiceProviderByServiceCategory:async()=>{const r={method:"get",url:"api/service_providers/service_category/"+C.value._id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},params};t.showLoader();try{const o=await v.request(r);k.value=o.data,t.hideLoader()}catch(o){console.log(o),t.hideLoader()}},addToTopSuggestionServiceProvider:async r=>{const o={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{topSuggested:!0}};t.showLoader();try{const n=await v.request(o);h(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:n.response.data.message}),t.hideLoader()}},removeFromTopSuggestionServiceProvider:async r=>{const o={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value.token}`},data:{topSuggested:!1}};t.showLoader();try{const n=await v.request(o);h(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:n.response.data.message}),t.hideLoader()}}}});export{le as a,ve as u};
