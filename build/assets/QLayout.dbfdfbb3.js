import{p as P,i as M,q,s as W,c,h,t as j,g as Q,u as B,v as D,r as m,x as _,w as y,y as A,z as N,o as I,A as K,B as U,C as G,D as k,E as J,G as F,H,a as X}from"./index.5188eabf.js";import{Q as V}from"./QResizeObserver.b37ad6a4.js";var oe=P({name:"QPageContainer",setup(t,{slots:S}){const{proxy:{$q:i}}=Q(),l=M(B,q);if(l===q)return console.error("QPageContainer needs to be child of QLayout"),q;W(D,!0);const o=c(()=>{const a={};return l.header.space===!0&&(a.paddingTop=`${l.header.size}px`),l.right.space===!0&&(a[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(a.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(a[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),a});return()=>h("div",{class:"q-page-container",style:o.value},j(S.default))}}),ne=P({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:S,emit:i}){const{proxy:{$q:l}}=Q(),o=M(B,q);if(o===q)return console.error("QFooter needs to be child of QLayout"),q;const a=m(parseInt(t.heightHint,10)),u=m(!0),b=m(_.value===!0||o.isContainer.value===!0?0:window.innerHeight),f=c(()=>t.reveal===!0||o.view.value.indexOf("F")>-1||l.platform.is.ios&&o.isContainer.value===!0),s=c(()=>o.isContainer.value===!0?o.containerHeight.value:b.value),p=c(()=>{if(t.modelValue!==!0)return 0;if(f.value===!0)return u.value===!0?a.value:0;const e=o.scroll.value.position+s.value+a.value-o.height.value;return e>0?e:0}),g=c(()=>t.modelValue!==!0||f.value===!0&&u.value!==!0),w=c(()=>t.modelValue===!0&&g.value===!0&&t.reveal===!0),d=c(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(g.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),C=c(()=>{const e=o.rows.value.bottom,r={};return e[0]==="l"&&o.left.space===!0&&(r[l.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),e[2]==="r"&&o.right.space===!0&&(r[l.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),r});function v(e,r){o.update("footer",e,r)}function z(e,r){e.value!==r&&(e.value=r)}function L({height:e}){z(a,e),v("size",e)}function $(){if(t.reveal!==!0)return;const{direction:e,position:r,inflectionPoint:x}=o.scroll.value;z(u,e==="up"||r-x<100||o.height.value-s.value-r-a.value<300)}function T(e){w.value===!0&&z(u,!0),i("focusin",e)}y(()=>t.modelValue,e=>{v("space",e),z(u,!0),o.animate()}),y(p,e=>{v("offset",e)}),y(()=>t.reveal,e=>{e===!1&&z(u,t.modelValue)}),y(u,e=>{o.animate(),i("reveal",e)}),y([a,o.scroll,o.height],$),y(()=>l.screen.height,e=>{o.isContainer.value!==!0&&z(b,e)});const n={};return o.instances.footer=n,t.modelValue===!0&&v("size",a.value),v("space",t.modelValue),v("offset",p.value),A(()=>{o.instances.footer===n&&(o.instances.footer=void 0,v("size",0),v("offset",0),v("space",!1))}),()=>{const e=N(S.default,[h(V,{debounce:0,onResize:L})]);return t.elevated===!0&&e.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),h("footer",{class:d.value,style:C.value,onFocusin:T},e)}}});const{passive:O}=G,Y=["both","horizontal","vertical"];var Z=P({name:"QScrollObserver",props:{axis:{type:String,validator:t=>Y.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:S}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,o,a;y(()=>t.scrollTarget,()=>{f(),b()});function u(){l!==null&&l();const g=Math.max(0,k(o)),w=J(o),d={top:g-i.position.top,left:w-i.position.left};if(t.axis==="vertical"&&d.top===0||t.axis==="horizontal"&&d.left===0)return;const C=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";i.position={top:g,left:w},i.directionChanged=i.direction!==C,i.delta=d,i.directionChanged===!0&&(i.direction=C,i.inflectionPoint=i.position),S("scroll",{...i})}function b(){o=U(a,t.scrollTarget),o.addEventListener("scroll",s,O),s(!0)}function f(){o!==void 0&&(o.removeEventListener("scroll",s,O),o=void 0)}function s(g){if(g===!0||t.debounce===0||t.debounce==="0")u();else if(l===null){const[w,d]=t.debounce?[setTimeout(u,t.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];l=()=>{d(w),l=null}}}const{proxy:p}=Q();return y(()=>p.$q.lang.rtl,u),I(()=>{a=p.$el.parentNode,b()}),A(()=>{l!==null&&l(),f()}),Object.assign(p,{trigger:s,getPosition:()=>i}),K}}),le=P({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:S,emit:i}){const{proxy:{$q:l}}=Q(),o=m(null),a=m(l.screen.height),u=m(t.container===!0?0:l.screen.width),b=m({position:0,direction:"down",inflectionPoint:0}),f=m(0),s=m(_.value===!0?0:F()),p=c(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),g=c(()=>t.container===!1?{minHeight:l.screen.height+"px"}:null),w=c(()=>s.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),d=c(()=>s.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function C(n){if(t.container===!0||document.qScrollPrevented!==!0){const e={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};b.value=e,t.onScroll!==void 0&&i("scroll",e)}}function v(n){const{height:e,width:r}=n;let x=!1;a.value!==e&&(x=!0,a.value=e,t.onScrollHeight!==void 0&&i("scrollHeight",e),L()),u.value!==r&&(x=!0,u.value=r),x===!0&&t.onResize!==void 0&&i("resize",n)}function z({height:n}){f.value!==n&&(f.value=n,L())}function L(){if(t.container===!0){const n=a.value>f.value?F():0;s.value!==n&&(s.value=n)}}let $=null;const T={instances:{},view:c(()=>t.view),isContainer:c(()=>t.container),rootRef:o,height:a,containerHeight:f,scrollbarWidth:s,totalWidth:c(()=>u.value+s.value),rows:c(()=>{const n=t.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:H({size:0,offset:0,space:!1}),right:H({size:300,offset:0,space:!1}),footer:H({size:0,offset:0,space:!1}),left:H({size:300,offset:0,space:!1}),scroll:b,animate(){$!==null?clearTimeout($):document.body.classList.add("q-body--layout-animate"),$=setTimeout(()=>{$=null,document.body.classList.remove("q-body--layout-animate")},155)},update(n,e,r){T[n][e]=r}};if(W(B,T),F()>0){let r=function(){n=null,e.classList.remove("hide-scrollbar")},x=function(){if(n===null){if(e.scrollHeight>l.screen.height)return;e.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(r,300)},R=function(E){n!==null&&E==="remove"&&(clearTimeout(n),r()),window[`${E}EventListener`]("resize",x)},n=null;const e=document.body;y(()=>t.container!==!0?"add":"remove",R),t.container!==!0&&R("add"),X(()=>{R("remove")})}return()=>{const n=N(S.default,[h(Z,{onScroll:C}),h(V,{onResize:v})]),e=h("div",{class:p.value,style:g.value,ref:t.container===!0?void 0:o,tabindex:-1},n);return t.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:o},[h(V,{onResize:z}),h("div",{class:"absolute-full",style:w.value},[h("div",{class:"scroll",style:d.value},[e])])]):e}}});export{le as Q,oe as a,ne as b};
