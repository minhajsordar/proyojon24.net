import{Q as P}from"./QImg.d4c0548c.js";import{s as x,t as T,r as h,v as I,C as u,x as L,N as V,I as M,bs as Y,a as f,d as k,e,f as a,K as o,P as l,M as B,O as U,z as c,_ as F,aA as q,L as v,J as w,Y as Q,Z as z,V as H,aB as O,aC as R,B as E,R as J}from"./index.ac7231d3.js";import{Q as K}from"./QMarkupTable.364e33d1.js";import{Q as Z}from"./QPagination.7cd55aeb.js";import{a as G,Q as W}from"./QBar.fa02d1c3.js";import{Q as j}from"./QTooltip.b4c807b6.js";import{C as X}from"./ClosePopup.4f8118ce.js";import{u as ee}from"./use-quasar.160f11e3.js";import{w as D}from"./root_url.5e50e74c.js";import"./position-engine.cf20c943.js";x("proyojonuserkey",{});const $=x("proyojonloginuser",{});I.title="Requesting To Server...";const te=T("pending nid verification store",()=>{const _=h(1),i=h("Please make sure you have paid correct amount or the transaction id is correct"),m=h(null),n=h(!1);return{currentPage:_,rejectNote:i,pendingNidVerificationList:m,pendingNidVerificationListLoading:n,getPendingNidVerificationList:async()=>{u("pending-nid-verification-list").showLoading();const g={method:"get",url:"api/users/pending_verification",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},params:{pageSize:2,pageNumber:_.value}};n.value=!0;try{const d=await L.request(g);m.value=d.data,n.value=!1,u("pending-nid-verification-list").hideLoading()}catch(d){console.log(d),u("pending-nid-verification-list").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}},approveNid:async g=>{const d={method:"put",url:"api/users/pending_verification/"+g,headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},data:{nidStatus:"approved",nidVerified:!0,note:""}};n.value=!0,u("put-pending-verification").showLoading();try{const t=await L.request(d);m.value=t.data,u("put-pending-verification").hideLoading(),n.value=!1}catch(t){console.log(t),u("put-pending-verification").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}},rejectNid:async g=>{const d={method:"put",url:"api/users/pending_verification/"+g,headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},data:{nidStatus:"rejected",nidVerified:!1,note:i.value}};n.value=!0,u("put-users-pendinglist").showLoading();try{const t=await L.request(d);m.value=t.data,u("put-users-pendinglist").hideLoading(),n.value=!1}catch(t){console.log(t),u("put-users-pendinglist").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}}}}),ae={class:"container-section-py-sm"},ie={class:"inner-section"},ne={class:"full-width"},oe={class:"bg-blue-grey-2"},se={class:"q-gutter-sm"},he={__name:"nidVerificationPendingList",setup(_){const i=te();i.getPendingNidVerificationList();const m=M(),n=()=>{i.getPendingNidVerificationList()},r=h(!1),N=h(null),S=ee(),{t:g}=Y(),d=t=>{S.dialog({title:g("reject"),message:"Are you sure to reject this?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(p=>{i.rejectNote=p,i.rejectNid(t)})};return(t,p)=>(f(),k(B,null,[e("div",ae,[e("div",ie,[e("div",ne,[a(q,{class:"border-primary q-pa-md"},{default:o(()=>{var y;return[e("div",null,[a(K,{flat:"",bordered:"",separator:"cell",class:"text-left"},{default:o(()=>{var b;return[e("thead",oe,[e("tr",null,[e("th",null,l(t.$t("serial")),1),e("th",null,l(t.$t("update_date")),1),e("th",null,l(t.$t("nidno")),1),e("th",null,l(t.$t("name")),1),e("th",null,l(t.$t("image")),1),e("th",null,l(t.$t("action")),1)])]),e("tbody",null,[(f(!0),k(B,null,U((b=c(i).pendingNidVerificationList)==null?void 0:b.users,(s,C)=>(f(),k("tr",{key:C,class:E({"bg-blue-grey-1":C%2!=0})},[e("td",null,l(C),1),e("td",null,l(c(J).formatDate(s.updatedAt,"YYYY-MM-DD  HH:mm:ss")),1),e("td",null,l(s.nidNo),1),e("td",null,l(s.name[c(m).language]),1),e("td",null,[a(P,{src:c(D)+(s==null?void 0:s.nidImage)},null,8,["src"])]),e("td",null,[e("div",se,[a(v,{class:"btn-h-39",dense:"",color:"white","text-color":"primary",icon:r.value?"fullscreen_exit":"visibility",onClick:()=>{r.value=!0,N.value=c(D)+(s==null?void 0:s.nidImage)}},null,8,["icon","onClick"]),a(v,{class:"btn-h-39",label:t.$t("approved"),color:"positive",onClick:A=>c(i).approveNid(s._id)},null,8,["label","onClick"]),a(v,{class:"btn-h-39",label:t.$t("reject"),color:"negative",onClick:A=>d(s._id)},null,8,["label","onClick"])])])],2))),128))])]}),_:1}),a(F,{class:"q-mt-md"}),a(Z,{class:"q-mt-md",color:"blue-grey-7",modelValue:c(i).currentPage,"onUpdate:modelValue":[p[0]||(p[0]=b=>c(i).currentPage=b),n],max:(y=c(i).pendingNidVerificationList)==null?void 0:y.pages,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"])])]}),_:1})])])]),a(R,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=y=>r.value=y),"full-height":"","full-width":"",maximized:""},{default:o(()=>[a(q,{class:"text-black"},{default:o(()=>[a(G,{class:"bg-primary text-white"},{default:o(()=>[a(W),a(v,{dense:"",glossy:"",flat:"",icon:"minimize",onClick:p[1]||(p[1]=y=>r.value=!1),disable:!r.value},{default:o(()=>[r.value?(f(),w(j,{key:0,class:"bg-white text-primary"},{default:o(()=>[Q("Minimize")]),_:1})):z("",!0)]),_:1},8,["disable"]),a(v,{dense:"",glossy:"",flat:"",icon:"crop_square"},{default:o(()=>[r.value?z("",!0):(f(),w(j,{key:0,class:"bg-white text-primary"},{default:o(()=>[Q("Maximize")]),_:1}))]),_:1}),H((f(),w(v,{dense:"",glossy:"",flat:"",icon:"close"},{default:o(()=>[a(j,{class:"bg-white text-primary"},{default:o(()=>[Q("Close")]),_:1})]),_:1})),[[X]])]),_:1}),a(O,null,{default:o(()=>[a(P,{src:N.value},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{he as default};
