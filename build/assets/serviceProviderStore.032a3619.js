import{t as K,s as E,br as Z,r as l,aD as ee,aF as ie,aH as re,aI as oe,aK as ne,u as te,G as se,bs as ae,ah as D,v as t,x as d,bt as j,N as p}from"./index.75f7e92a.js";import{u as R,a as M}from"./serviceCategoryStore.424bb9a3.js";const ce=K("search service store",()=>{const m=le();R();const u=M();return{updateServiceCategory:()=>{u.getAllServiceCategorys(m.serviceProviderInfo.service._id),u.getServiceCategoryList()},updateServiceCategoryForService:()=>{var _;u.getAllServiceCategorys((_=u==null?void 0:u.filteredByServiseId)==null?void 0:_._id)},updateServiceCategoryOnServiceProviderTable:()=>{u.getAllServiceCategorys(u.filteredByServiseId._id)}}});E("proyojonuserkey",{});const a=E("proyojonloginuser",{});t.title="Requesting To Server...";const le=K("service provider store",()=>{const{t:m}=Z(),u=ce();l(null),ee();const B=ie(),x=re(),N=oe(),_=ne(),I=te();se();const q=R(),c=ae(),b=M(),S=l(!1),T=l(!1),O=l(!1),J=l(1),h=l(null),v=D({imageCover1:null,imageCover2:null,imageCover3:null}),V=l(null),C=l(null),z=l(1),i=D({division:null,district:null,subDistrict:null,union:null,pinlocation:null,exact:{bn:null,en:null}}),k=l([]),$=D({name:{bn:null,en:null},username:null,phone:null,email:null,password:null,password2:null}),e=D({id:null,user:null,name:{bn:null,en:null},description:{bn:null,en:null},serviceImage1:null,serviceImage2:null,serviceImage3:null,serviceCategory:null,service:null,image:null,rankCount:1,serviceProviderLocation:{division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},degree:{bn:null,en:null},serviceTitle:{bn:null,en:null},phoneNumber1:null,phoneNumber2:null,facebook:null,whatsapp:null,imo:null,twitter:null,email:null,experience:null,keywords:null,registrationNo:null}),F=()=>{h.value=null,v.imageCover1=null,v.imageCover2=null,v.imageCover3=null,e.user=null,e.name={bn:null,en:null},e.description={bn:null,en:null},e.serviceImage1=null,e.serviceImage2=null,e.serviceImage3=null,e.image=null,e.service=null,e.serviceCategory=null,e.rankCount=1,i.division=null,i.district=null,i.subDistrict=null,i.union=null,i.pinlocation=null,i.exact={bn:null,en:null},e.serviceProviderLocation={division:{_id:null,name:{bn:null,en:null}},district:{_id:null,name:{bn:null,en:null}},subDistrict:{_id:null,name:{bn:null,en:null}},union:{_id:null,name:{bn:null,en:null}},pinlocation:{_id:null,name:{bn:null,en:null}},exact:{bn:null,en:null}},e.degree={bn:null,en:null},e.extraCources={bn:null,en:null},e.serviceTitle={bn:null,en:null},e.serviceList=[{bn:null,en:null}],e.specialties={bn:null,en:null},e.phoneNumber1=null,e.phoneNumber2=null,e.facebook=null,e.whatsapp=null,e.imo=null,e.email=null,e.experience=null,e.twitter=null,e.keywords=[]},G=()=>{F(),S.value=!0},H=r=>{["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","serviceTitle","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"].forEach((o,s)=>{e[o]=r[o]}),e.id=r==null?void 0:r._id,e.service=q.serviceList.services.filter(o=>o._id==e.service)[0],e.serviceCategory=b.serviceCategoryList.serviceCategorys.filter(o=>o._id==e.serviceCategory)[0],v.imageCover1={name:e.serviceImage1},v.imageCover2={name:e.serviceImage2},v.imageCover2={name:e.serviceImage3},h.value={name:e.icon},i.division=r.serviceProviderLocation.division,i.district=r.serviceProviderLocation.district,i.subDistrict=r.serviceProviderLocation.subDistrict,i.union=r.serviceProviderLocation.union,i.pinlocation=r.serviceProviderLocation.pinlocation,u.updateServiceCategory(),T.value=!0,i.division&&B.getAllDistricts(i.division._id),i.district&&x.getAllSubDistricts(i.district._id),i.subDistrict&&N.getAllUnions(i.subDistrict._id),i.union&&_.getAllPinlocations(i.union._id)},Q=r=>{const n=["id","user","name","description","serviceImage1","serviceImage2","serviceImage3","serviceCategory","service","image","rankCount","serviceProviderLocation","degree","extraCources","serviceTitle","serviceList","specialties","phoneNumber1","phoneNumber2","facebook","whatsapp","imo","email","experience","twitter","keywords"];O.value=!0,n.forEach((o,s)=>{e[o]=r[o]}),e.id=r==null?void 0:r._id,e.service=q.serviceList.services.filter(o=>o._id==e.service)[0],e.serviceCategory=b.serviceCategoryList.serviceCategorys.filter(o=>o._id==e.serviceCategory)[0],v.imageCover1={name:e.serviceImage1},v.imageCover2={name:e.serviceImage2},v.imageCover2={name:e.serviceImage3},h.value={name:e.icon},i.division=r.serviceProviderLocation.division,i.district=r.serviceProviderLocation.district,i.subDistrict=r.serviceProviderLocation.subDistrict,i.union=r.serviceProviderLocation.union,i.pinlocation=r.serviceProviderLocation.pinlocation},f=l(null),W=l([]),L=l(!1);l(0);const A=l(1),P=l(""),X=async r=>{L.value=!0;const n={};r&&(n.serviceCategoryId=r),P.value!==""&&(n.keywords=P.value),n.pageNumber=1,c.browsingLocation.pinlocation?n.pinlocationId=c.browsingLocation.pinlocation._id:c.browsingLocation.union?n.unionId=c.browsingLocation.union._id:c.browsingLocation.subDistrict?n.subDistrictId=c.browsingLocation.subDistrict._id:c.browsingLocation.district?n.districtId=c.browsingLocation.district._id:c.browsingLocation.division&&(n.divisionId=c.browsingLocation.division._id);const o={method:"get",url:"api/service_providers/all",headers:{"Content-Type":"application/json"},params:n};t.showLoader();try{const s=await d.request(o);f.value=s.data,t.hideLoader(),L.value=!1}catch(s){console.log(s),t.hideLoader(),L.value=!1}},Y=async r=>{L.value=!0;const n={};r&&(n.serviceCategoryId=r),P.value!==""&&(n.keywords=P.value),A.value&&(n.pageNumber=A.value),c.browsingLocation.pinlocation?n.pinlocationId=c.browsingLocation.pinlocation._id:c.browsingLocation.union?n.unionId=c.browsingLocation.union._id:c.browsingLocation.subDistrict?n.subDistrictId=c.browsingLocation.subDistrict._id:c.browsingLocation.district?n.districtId=c.browsingLocation.district._id:c.browsingLocation.division&&(n.divisionId=c.browsingLocation.division._id);const o={method:"get",url:"api/service_providers/all",headers:{"Content-Type":"application/json"},params:n};t.showLoader();try{const s=await d.request(o);f.value.page=s.data.page,f.value.pages=s.data.pages,f.value.serviceProviders.push(...s.data.serviceProviders),t.hideLoader(),L.value=!1}catch(s){console.log(s),t.hideLoader(),L.value=!1}},y=async()=>{const r={pageNumber:z.value};C.value?r.serviceCategoryId=C.value._id:b.filteredByServiseId&&(r.serviceId=b.filteredByServiseId._id);const n={method:"get",url:"api/service_providers/",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},params:r};t.showLoader();try{const o=await d.request(n);o.data.serviceProviders.sort((s,g)=>s.order-g.order),k.value=o.data,t.hideLoader()}catch(o){console.log(o),t.hideLoader()}},U=l(null),w=l(!1);return{openServiceProviderEditDialog:T,openServiceProviderEditDialogManager:H,openServiceProviderPreviewDialog:O,openServiceProviderPreviewDialogManager:Q,openServiceProviderCreateDialog:S,openServiceProviderCreateDialogManager:G,allServiceProvidersList:f,allServiceProvidersListLoading:L,suggestedServiceProvidersList:W,searchKeyword:P,serviceProviderPageNumber:A,getPublicServiceProviders:X,getPublicServiceProvidersNextPages:Y,addToSuggestionServiceProvider:async r=>{const n={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:{suggested:!0}};t.showLoader();try{const o=await d.request(n);y(),t.hideLoader()}catch(o){console.log(o),p.create({position:"center",type:"negative",message:JSON.stringify(o)}),t.hideLoader()}},removeFromSuggestionServiceProvider:async r=>{const n={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:{suggested:!1}};t.showLoader();try{const o=await d.request(n);y(),t.hideLoader()}catch(o){console.log(o),p.create({position:"center",type:"negative",message:o.response.data.message}),t.hideLoader()}},paginationCurrent:J,serviceProvider:U,serviceProviderLoading:w,getServiceProviderById:async r=>{w.value=!0;const n={method:"get",url:"api/service_providers/"+r,headers:{"Content-Type":"application/json"}};t.showLoader();try{const o=await d.request(n);U.value=o.data,t.hideLoader(),w.value=!1}catch(o){console.log(o),t.hideLoader(),w.value=!1}},increaseServiceProviderView:async r=>{const n={method:"put",url:"api/service_providers/service_provider_view/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:{_id:r}};try{const o=await d.request(n)}catch(o){console.log(o)}},serviceProviderPage:z,serviceProviderList:k,serviceProviderInfo:e,serviceProviderRegisterInfo:$,getServiceProviderList:y,createServiceProvider:async()=>{var o,s;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(o=i.union)!=null&&o._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(s=i.pinlocation)!=null&&s._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,a.value.permission=="admin"||a.value.permission=="superAdmin"||a.value.permission!=="self"||(e.user=a.value._id);const r=e,n={method:"post",url:"api/service_providers",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:r};t.showLoader();try{const g=await d.request(n);S.value=!1,a.value.permission=="admin"&&y(),j.create({title:m("create_service_provider_success"),message:m("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")}),t.hideLoader()}catch(g){console.log(g),p.create({position:"center",type:"negative",message:g.response.data.message}),t.hideLoader()}},createUserAndServiceProvider:async()=>{var o,s;e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,(o=i.union)!=null&&o._id&&(e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id),(s=i.pinlocation)!=null&&s._id&&(e.serviceProviderLocation.pinlocation.name=i.pinlocation.name,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id),e.serviceProviderLocation.exact=i.exact,a.value.permission=="admin"||a.value.permission=="superAdmin"||a.value.permission!=="self"||(e.user=a.value._id);const r={...e,...$},n={method:"post",url:"api/service_providers/user_and_provider",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:r};console.log(r),t.showLoader();try{const g=await d.request(n);S.value=!1,a.value.permission=="admin"&&y(),j.create({title:m("create_service_provider_success"),message:m("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")}),t.hideLoader()}catch(g){console.log(g),p.create({position:"center",type:"negative",message:g.response.data.message}),t.hideLoader()}},updateServiceProvider:async()=>{e.service instanceof Object&&(e.service=e.service._id),e.serviceCategory instanceof Object&&(e.serviceCategory=e.serviceCategory._id),e.serviceProviderLocation.division.name=i.division.name,e.serviceProviderLocation.division._id=i.division._id,e.serviceProviderLocation.district.name=i.district.name,e.serviceProviderLocation.district._id=i.district._id,e.serviceProviderLocation.subDistrict.name=i.subDistrict.name,e.serviceProviderLocation.subDistrict._id=i.subDistrict._id,e.serviceProviderLocation.union.name=i.union.name,e.serviceProviderLocation.union._id=i.union._id,e.serviceProviderLocation.pinlocation=i.pinlocation,e.serviceProviderLocation.pinlocation._id=i.pinlocation._id;const r=e,n={method:"put",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:r};t.showLoader();try{const o=await d.request(n);T.value=!1,t.hideLoader(),j.create({title:m("success"),message:m("wait_for_confirmation"),ok:{push:!0},persistent:!0}).onOk(()=>{I.push("/profile")})}catch(o){console.log(o),t.hideLoader(),p.create({position:"center",type:"negative",message:o})}},deleteServiceProvider:async()=>{const r={method:"delete",url:"api/service_providers/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`}};t.showLoader();try{const n=await d.request(r);y(),t.hideLoader()}catch(n){console.log(n),p.create({position:"center",type:"negative",message:JSON.stringify(n)}),t.hideLoader()}},serviceProviderLocationR:i,emptyServiceProviderInfo:F,imageIcon:h,imageCover:v,uploadIcon:async()=>{if(!h.value||typeof h.value=="string"||typeof h.value=="Object")return;e.icon;const r={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${a.value.token}`},data:{image:h.value}};try{const n=await d.request(r);e.image=n.data}catch(n){console.log(n),p.create({position:"center",type:"negative",message:n.response.data.message})}},selectedServiceCategory:V,uploadCoverImage:async(r,n)=>{if(!v[r]||typeof v[r]=="string")return;const o={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${a.value.token}`},data:{image:v[r]}};try{const s=await d.request(o);e[n]=s.data}catch(s){console.log(s),p.create({position:"center",type:"negative",message:s.response.data.message})}},filteredByServiseCategoryId:C,getFilteredServiceProviderByServiceCategory:async()=>{const r={method:"get",url:"api/service_providers/service_category/"+C.value._id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},params};t.showLoader();try{const n=await d.request(r);n.data.serviceProviders.sort((o,s)=>o.order-s.order),k.value=n.data,t.hideLoader()}catch(n){console.log(n),t.hideLoader()}},addToTopSuggestionServiceProvider:async r=>{const n={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:{topSuggested:!0}};t.showLoader();try{const o=await d.request(n);y(),t.hideLoader()}catch(o){console.log(o),p.create({position:"center",type:"negative",message:o.response.data.message}),t.hideLoader()}},removeFromTopSuggestionServiceProvider:async r=>{const n={method:"put",url:"api/service_providers/suggest/"+r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.value.token}`},data:{topSuggested:!1}};t.showLoader();try{const o=await d.request(n);y(),t.hideLoader()}catch(o){console.log(o),p.create({position:"center",type:"negative",message:o.response.data.message}),t.hideLoader()}}}});export{ce as a,le as u};
