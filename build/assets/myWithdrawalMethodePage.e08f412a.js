import{G as W,K as x,az as L,r as b,L as q,M as u,N as B,a1 as M,a as l,p as k,q as m,f as s,s as $,v as P,x as p,I as R,t as S,e,B as g,U as D,y as o,V as E,a2 as I,D as T,bi as j,d as y,A as F,O as A,a7 as z,H as U,C as N}from"./index.af42af3a.js";import{Q as O}from"./QMarkupTable.b5d7358e.js";import{u as K}from"./use-quasar.e6ffd3db.js";import{Q as G}from"./QSpace.f6335dfa.js";import{Q as H}from"./QTooltip.ea884511.js";import{Q as J}from"./QBar.e347354b.js";import{C as X}from"./ClosePopup.7b502ad2.js";import"./position-engine.8af4ef31.js";W("proyojonuserkey",{});const C=W("proyojonloginuser",{});q.title="Requesting To Server...";const Q=x("withdrawal methode store",()=>{const n=L({id:null,mobileBankName:"",phone:""}),a=L({bkash:!1,rocket:!1,nagad:!1}),w=b(null),i=b(!1),d=b(!1),r=()=>{d.value=!0,n.id=null,n.mobileBankName="Bkash (Personal)",n.phone=""},c=()=>{d.value=!0,n.id=null,n.mobileBankName="Rocket (Personal)",n.phone=""},t=()=>{d.value=!0,n.id=null,n.mobileBankName="Nagad (Personal)",n.phone=""},_=async()=>{const v={method:"get",url:"api/withdrawal_methode",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C.value.token}`}};i.value=!0,u("get-withdrawalMethode-user").showLoading();try{const f=await B.request(v);w.value=f.data,f.data.forEach(h=>{h.mobileBankName=="Bkash (Personal)"&&(a.bkash=!0),h.mobileBankName=="Rocket (Personal)"&&(a.rocket=!0),h.mobileBankName=="Nagad (Personal)"&&(a.nagad=!0)}),u("get-withdrawalMethode-user").hideLoading(),i.value=!1}catch(f){console.log(f),u("get-withdrawalMethode-user").hideLoading(),M.create({position:"center",type:"negative",message:"Couldn't get withdrawalMethode list"}),i.value=!1}};return{withdrawalMethodeInfo:n,myWithdrawalMethodeList:w,existingBankAccount:a,getMyWithdrawalMethodeList:_,myWithdrawalMethodeListLoading:i,openWithdrawalMethodeDialog:d,withdrawalMethodeDialogManagerBkash:r,withdrawalMethodeDialogManagerRocket:c,withdrawalMethodeDialogManagerNagad:t,deleteWithdrawalMethode:async v=>{const f={method:"patch",url:"api/withdrawal_methode/"+v,headers:{"Content-Type":"application/json",Authorization:`Bearer ${C.value.token}`}};u("delete-withdrawalMethode_methode").showLoading();try{const h=await B.request(f);_(),u("delete-withdrawalMethode_methode").hideLoading(),M.create({position:"center",type:"positive",message:"Successfully deleted withdrawalMethode"})}catch(h){console.log(h),u("delete-withdrawalMethodes").hideLoading(),M.create({position:"center",type:"negative",message:"Failed to delete withdrawalMethode"})}},createWithdrawalMethode:async()=>{const v=n,f={method:"post",url:"api/withdrawal_methode",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C.value.token}`},data:v};u("create-withdrawalMethode_methode").showLoading();try{const h=await B.request(f);_(),d.value=!1,u("create-withdrawalMethode_methode").hideLoading(),M.create({position:"center",type:"positive",message:"Successfully created withdrawalMethode"})}catch(h){console.log(h),u("delete-withdrawalMethodes").hideLoading(),M.create({position:"center",type:"negative",message:"Failed to delete withdrawalMethode"})}}}}),Y={class:"row q-col-gutter-sm"},Z={class:"col-12"},ee={class:"row"},ae={class:"col-12"},te={class:"text-bold"},oe={class:"col-12"},le={class:"text-bold"},se={class:"col-12"},ne={class:"row justify-end"},re={__name:"addWithdrawalMethodeDialog",setup(n){const a=Q(),w=b(null),i=b(null),d=()=>{w.value.validate(),i.value.validate(),!(w.value.hasError||i.value.hasError)&&a.createWithdrawalMethode()};return(r,c)=>(l(),k(T,{modelValue:o(a).openWithdrawalMethodeDialog,"onUpdate:modelValue":c[2]||(c[2]=t=>o(a).openWithdrawalMethodeDialog=t),persistent:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:m(()=>[s($,{class:"text-primary"},{default:m(()=>[s(J,{class:"bg-primary text-white"},{default:m(()=>[s(G),P((l(),k(p,{dense:"",glossy:"",flat:"",icon:"close",class:"bg-red"},{default:m(()=>[s(H,{class:"bg-primary text-white"},{default:m(()=>[R("Close")]),_:1})]),_:1})),[[X]])]),_:1}),s(S,null,{default:m(()=>[s($,{class:"border-primary q-pa-md"},{default:m(()=>[e("div",Y,[e("div",Z,[e("div",ee,[e("div",ae,[e("div",te,g(r.$t("bankAccountName")),1),s(D,{ref_key:"bankAccountNameEl",ref:w,modelValue:o(a).withdrawalMethodeInfo.mobileBankName,"onUpdate:modelValue":c[0]||(c[0]=t=>o(a).withdrawalMethodeInfo.mobileBankName=t),outlined:"",dense:"",disable:"",rules:[o(E)]},null,8,["modelValue","rules"])]),e("div",oe,[e("div",le,g(r.$t("AccoountPhoneNumber")),1),s(D,{ref_key:"phoneNumberEl",ref:i,modelValue:o(a).withdrawalMethodeInfo.phone,"onUpdate:modelValue":c[1]||(c[1]=t=>o(a).withdrawalMethodeInfo.phone=t),outlined:"",dense:"",rules:[o(I)]},null,8,["modelValue","rules"])])])]),e("div",se,[e("div",ne,[s(p,{label:r.$t("confirm"),color:"primary",glossy:"",onClick:d},null,8,["label"])])])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ie={class:"container-section-py-sm"},de={class:"inner-section"},ce={class:"full-width"},he={class:"flex q-gutter-sm"},ue={class:"q-mt-md"},me={class:"fs-18"},pe={class:"bg-blue-grey-2"},ge={key:0},we={key:1},fe={key:2},$e={__name:"myWithdrawalMethodePage",setup(n){const a=Q();a.getMyWithdrawalMethodeList();const w=K(),{t:i}=j(),d=r=>{w.dialog({title:i("confirm"),message:"Are you sure to remove this payment mathode?",cancel:!0,persistent:!0}).onOk(()=>{a.deleteWithdrawalMethode(r),console.log(">>>> OK")})};return(r,c)=>(l(),y(A,null,[e("div",ie,[e("div",de,[e("div",ce,[e("div",he,[o(a).existingBankAccount.bkash?(l(),k(p,{key:1,class:"text-normal",label:"Bkash (personal)",color:"pink-6"})):(l(),k(p,{key:0,class:"text-normal",label:"Register for Bkash (personal)",color:"pink-6",onClick:o(a).withdrawalMethodeDialogManagerBkash},null,8,["onClick"])),o(a).existingBankAccount.rocket?(l(),k(p,{key:3,class:"text-normal",label:"Rocket (personal)",color:"deep-purple-7"})):(l(),k(p,{key:2,class:"text-normal",label:"Register for Rocket (personal)",color:"deep-purple-7",onClick:o(a).withdrawalMethodeDialogManagerRocket},null,8,["onClick"])),o(a).existingBankAccount.nagad?(l(),k(p,{key:5,class:"text-normal",label:"Nagad (personal)",color:"deep-orange-6"})):(l(),k(p,{key:4,class:"text-normal",label:"Register for Nagad (personal)",color:"deep-orange-6",onClick:o(a).withdrawalMethodeDialogManagerNagad},null,8,["onClick"]))]),e("div",ue,[s($,{class:"q-pa-md"},{default:m(()=>[e("div",null,[e("div",me,g(r.$t("payment_methode_list")),1),s(F,{class:"q-my-sm"}),s(O,{flat:"",bordered:"",separator:"cell",class:"text-left"},{default:m(()=>[e("thead",pe,[e("tr",null,[e("th",null,g(r.$t("AccoountPhoneNumber")),1),e("th",null,g(r.$t("bankAccountName")),1),e("th",null,g(r.$t("status")),1),e("th",null,g(r.$t("action")),1)])]),e("tbody",null,[(l(!0),y(A,null,z(o(a).myWithdrawalMethodeList,(t,_)=>(l(),y("tr",{key:_,class:U({"bg-blue-grey-1":_%2!=0})},[e("td",null,g(t.phone),1),e("td",null,g(t.mobileBankName),1),e("td",null,[t.pendingForRemove?(l(),y("span",ge,"Pending for remove")):N("",!0),t.pendingForVerification?(l(),y("span",we,"Pending for verification")):N("",!0),t.verified?(l(),y("span",fe,"Active")):N("",!0)]),e("td",null,[s(p,{label:"Remove",color:"red",onClick:V=>d(t._id),disabled:t.pendingForRemove},null,8,["onClick","disabled"])])],2))),128))])]),_:1})])]),_:1})])])])]),s(re)],64))}};export{$e as default};
