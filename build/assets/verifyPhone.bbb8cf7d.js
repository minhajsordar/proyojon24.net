import{G as y,aD as C,bf as U,u as L,F as D,m as V,r as h,as as I,bc as d,be as g,bk as S,Z as c,bl as R,bd as o}from"./index.9c7f7a59.js";y("proyojonuserkey",{});const _=y("proyojonloginuser",{}),T=y("myrooms",{});d.title="Requesting To Server...";const b=200,q={origin:{y:.7}};function u(a,t){R(Object.assign({},q,t,{particleCount:Math.floor(b*a)}))}const j=C("register store",()=>{M();const{t:a}=U(),t=L(),f=D(),r=V(),p=h(null),e=I({name:{bn:null,en:null},username:null,phone:null,email:null,password:null,password2:null,bankAccountName:"",phoneNumber:"",transactionId:"",amount:0,reference:null,accountType:"personal"});return{newUserInfo:e,matchPassword:()=>e.password==e.password2?!0:"Password Not Matched",nidImage:p,registerNewUser:async()=>{const w={name:e.name,phone:e.phone,username:e.username,email:e.email,password:e.password,reference:e.reference},O={method:"post",url:"api/users/register",headers:{"Content-Type":"application/json"},data:w};d.showLoader();try{const n=await g.request(O);d.hideLoader(),u(.25,{spread:26,startVelocity:55}),u(.2,{spread:60}),u(.35,{spread:100,decay:.91,scalar:.8}),u(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),u(.1,{spread:120,startVelocity:45}),S.create({title:a("register_success"),message:a("create_service_provider"),ok:{push:!0},cancel:{push:!0,color:"negative"},persistent:!0}).onOk(()=>{r.loginUserInfo=n.data,_.value=n.data,_.value=n.data,r.isAuthorized=!0,r.rememberUserData(),f.switchToBn(),T.value=null,t.push("/service_provider_profile")}).onCancel(()=>{t.push("/login")})}catch(n){console.log(n),d.hideLoader(),c.create({position:"center",type:"negative",message:n})}}}});d.title="Requesting To Server...";const M=C("otp verification store",()=>{const a=V(),t=j(),f=L(),r=h(!1),p=h(!1),e=h(""),m=()=>{r.value=!0,e.value=""},v=()=>{p.value=!0,e.value=""};return{getOtpVerificationCode:async s=>{const i={method:"post",url:"api/otp/request_phone_verification_otp",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.loginUserInfo.token}`},data:{phone:a.loginUserInfo.phone}};o("get-otp-verirication-code").showLoading();try{const l=await g.request(i);o("get-otp-verirication-code").hideLoading(),c.create({position:"center",type:"positive",message:"Otp Sent successfully"}),s()}catch(l){console.log(l),o("get-otp-verirication-code").hideLoading(),c.create({position:"center",type:"negative",message:"Could not send OTP. Server error."})}},verifyOtpCode:async()=>{if(e.value=="")return;const s={method:"post",url:"api/otp/verify_phone",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.loginUserInfo.token}`},data:{otp:e.value}};o("verify-otp-verirication-code").showLoading();try{const i=await g.request(s);a.loginUserInfo.phoneVerified=!0,r.value=!1,f.push("/service_provider_profile"),o("verify-otp-verirication-code").hideLoading()}catch(i){console.log(i),r.value=!1,o("verify-otp-verirication-code").hideLoading(),c.create({position:"center",type:"negative",message:"Could not verify otp. Try again later."})}},getOtpVerificationCodeWhileRegistration:async()=>{console.log(t.newUserInfo);const s={method:"post",url:"api/otp/request_phone_verification_otp_while_registration",headers:{"Content-Type":"application/json"},data:{username:t.newUserInfo.username,phone:t.newUserInfo.phone,email:t.newUserInfo.email}};o("get-otp-verirication-code-while-registration").showLoading();try{await g.request(s),v(),o("get-otp-verirication-code-while-registration").hideLoading()}catch(i){console.log(i),o("get-otp-verirication-code-while-registration").hideLoading(),c.create({position:"center",type:"negative",message:"Could not send OTP. Server error."})}},verifyOtpCodeWhileRegistration:async s=>{if(e.value=="")return;const i={method:"post",url:"api/otp/verify_phone_while_registration",headers:{"Content-Type":"application/json"},data:{otp:e.value,phone:t.newUserInfo.phone}};o("verify-otp-verirication-code").showLoading();try{const l=await g.request(i);r.value=!1,f.push("/service_provider_profile"),o("verify-otp-verirication-code").hideLoading(),t.registerNewUser()}catch(l){console.log(l),r.value=!1,o("verify-otp-verirication-code").hideLoading(),c.create({position:"center",type:"negative",message:"Could not verify otp. Try again later."})}},openOtpVerificationDialog:r,otpInput:e,openOtpVerificationDialogManager:m,closeOtpVerificationDialogManager:()=>{r.value=!1},openOtpRegistationVerificationDialogManager:v,openOtpRegistrationVerificationDialog:p,closeOtpRegistationVerificationDialogManager:()=>{p.value=!1}}});export{j as a,M as u};
