import{Q as P}from"./QImg.117a1ea1.js";import{G as z,K as T,r as h,L as I,M as u,N as C,a1 as V,F as M,bi as Y,a as f,d as k,e,f as a,q as o,B as l,O as q,a7 as F,y as c,A as H,s as D,x as v,p as Q,I as w,C as B,v as U,t as O,D as E,H as G,ac as K}from"./index.22ce1958.js";import{Q as R}from"./QMarkupTable.5fbc5c89.js";import{Q as J}from"./QPagination.77fa0b45.js";import{Q as W}from"./QSpace.e364dfe7.js";import{Q as j}from"./QTooltip.b65d0c48.js";import{Q as X}from"./QBar.0b164ecf.js";import{C as Z}from"./ClosePopup.79861f0b.js";import{u as ee}from"./use-quasar.8165f457.js";import{w as x}from"./root_url.456ded4c.js";import"./position-engine.fcd73467.js";z("proyojonuserkey",{});const $=z("proyojonloginuser",{});I.title="Requesting To Server...";const te=T("pending nid verification store",()=>{const N=h(1),i=h("Please make sure you have paid correct amount or the transaction id is correct"),m=h(null),n=h(!1);return{currentPage:N,rejectNote:i,pendingNidVerificationList:m,pendingNidVerificationListLoading:n,getPendingNidVerificationList:async()=>{u("pending-nid-verification-list").showLoading();const g={method:"get",url:"api/users/pending_verification",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},params:{pageSize:30,pageNumber:N.value}};n.value=!0;try{const d=await C.request(g);m.value=d.data,n.value=!1,u("pending-nid-verification-list").hideLoading()}catch(d){console.log(d),u("pending-nid-verification-list").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}},approveNid:async g=>{const d={method:"put",url:"api/users/pending_verification/"+g,headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},data:{nidStatus:"approved",nidVerified:!0,note:""}};n.value=!0,u("put-pending-verification").showLoading();try{const t=await C.request(d);m.value=t.data,u("put-pending-verification").hideLoading(),n.value=!1}catch(t){console.log(t),u("put-pending-verification").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}},rejectNid:async g=>{const d={method:"put",url:"api/users/pending_verification/"+g,headers:{"Content-Type":"application/json",Authorization:`Bearer ${$.value.token}`},data:{nidStatus:"rejected",nidVerified:!1,note:i.value}};n.value=!0,u("put-users-pendinglist").showLoading();try{const t=await C.request(d);m.value=t.data,u("put-users-pendinglist").hideLoading(),n.value=!1}catch(t){console.log(t),u("put-users-pendinglist").hideLoading(),V.create({position:"center",type:"negative",message:"Couldn't get payment list"}),n.value=!1}}}}),ae={class:"container-section-py-sm"},ie={class:"inner-section"},ne={class:"full-width"},oe={class:"bg-blue-grey-2"},se={class:"q-gutter-sm"},ye={__name:"nidVerificationPendingList",setup(N){const i=te();i.getPendingNidVerificationList();const m=M(),n=()=>{i.getPendingNidVerificationList()},r=h(!1),_=h(null),S=ee(),{t:g}=Y(),d=t=>{S.dialog({title:g("reject"),message:"Are you sure to reject this?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(p=>{i.rejectNote=p,i.rejectNid(t)})};return(t,p)=>(f(),k(q,null,[e("div",ae,[e("div",ie,[e("div",ne,[a(D,{class:"border-primary q-pa-md"},{default:o(()=>{var y;return[e("div",null,[a(R,{flat:"",bordered:"",separator:"cell",class:"text-left"},{default:o(()=>{var b;return[e("thead",oe,[e("tr",null,[e("th",null,l(t.$t("serial")),1),e("th",null,l(t.$t("update_date")),1),e("th",null,l(t.$t("nidno")),1),e("th",null,l(t.$t("name")),1),e("th",null,l(t.$t("image")),1),e("th",null,l(t.$t("action")),1)])]),e("tbody",null,[(f(!0),k(q,null,F((b=c(i).pendingNidVerificationList)==null?void 0:b.users,(s,L)=>(f(),k("tr",{key:L,class:G({"bg-blue-grey-1":L%2!=0})},[e("td",null,l(L),1),e("td",null,l(c(K).formatDate(s.updatedAt,"YYYY-MM-DD  HH:mm:ss")),1),e("td",null,l(s.nidNo),1),e("td",null,l(s.name[c(m).language]),1),e("td",null,[a(P,{src:c(x)+(s==null?void 0:s.nidImage)},null,8,["src"])]),e("td",null,[e("div",se,[a(v,{class:"btn-h-39",dense:"",color:"white","text-color":"primary",icon:r.value?"fullscreen_exit":"visibility",onClick:()=>{r.value=!0,_.value=c(x)+(s==null?void 0:s.nidImage)}},null,8,["icon","onClick"]),a(v,{class:"btn-h-39",label:t.$t("approved"),color:"positive",onClick:A=>c(i).approveNid(s._id)},null,8,["label","onClick"]),a(v,{class:"btn-h-39",label:t.$t("reject"),color:"negative",onClick:A=>d(s._id)},null,8,["label","onClick"])])])],2))),128))])]}),_:1}),a(H,{class:"q-mt-md"}),a(J,{class:"q-mt-md",color:"blue-grey-7",modelValue:c(i).currentPage,"onUpdate:modelValue":[p[0]||(p[0]=b=>c(i).currentPage=b),n],max:(y=c(i).pendingNidVerificationList)==null?void 0:y.pages,"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max"])])]}),_:1})])])]),a(E,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=y=>r.value=y),"full-height":"","full-width":"",maximized:""},{default:o(()=>[a(D,{class:"text-black"},{default:o(()=>[a(X,{class:"bg-primary text-white"},{default:o(()=>[a(W),a(v,{dense:"",glossy:"",flat:"",icon:"minimize",onClick:p[1]||(p[1]=y=>r.value=!1),disable:!r.value},{default:o(()=>[r.value?(f(),Q(j,{key:0,class:"bg-white text-primary"},{default:o(()=>[w("Minimize")]),_:1})):B("",!0)]),_:1},8,["disable"]),a(v,{dense:"",glossy:"",flat:"",icon:"crop_square"},{default:o(()=>[r.value?B("",!0):(f(),Q(j,{key:0,class:"bg-white text-primary"},{default:o(()=>[w("Maximize")]),_:1}))]),_:1}),U((f(),Q(v,{dense:"",glossy:"",flat:"",icon:"close"},{default:o(()=>[a(j,{class:"bg-white text-primary"},{default:o(()=>[w("Close")]),_:1})]),_:1})),[[Z]])]),_:1}),a(O,null,{default:o(()=>[a(P,{src:_.value},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{ye as default};
