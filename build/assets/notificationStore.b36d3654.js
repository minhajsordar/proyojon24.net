import{s as h,t as L,u as N,r as a,ai as D,v as w,C as i,x as s,N as c,R as m}from"./index.c2c0cf9a.js";h("proyojonuserkey",{});const u=h("proyojonloginuser",{});w.title="Requesting To Server...";const A=L("notification store",()=>{N();const f=a(null),l=a(null),g=a(null),d=a(!1),p=a(!1),t=D({id:null,title:null,description:null,published:!1,link:null}),y=()=>{t.id=null,t.title=null,t.description=null,t.published=!1,t.link=null,d.value=!0},v=e=>{t.id=e._id,t.title=e.title,t.description=e.description,t.published=e.published,t.link=e.link,p.value=!0},r=async()=>{const e={method:"get",url:"api/common_notifications",headers:{"Content-Type":"application/json"}};i("get-common-notifications").showLoading();try{const o=await s.request(e);f.value=o.data,i("get-common-notifications").hideLoading(),c.create({position:"center",type:"positive",message:"you have "+o.data.length+" unread notifications"})}catch(o){console.log(o),i("get-common-notifications").hideLoading()}};return{openCreateNotificationDialog:d,openCreateNotificationManager:y,openEditNotificationDialog:p,openEditNotificationManager:v,notificationInfo:t,notificationList:f,getPublishedNotification:async()=>{const e={method:"get",url:"api/common_notifications",headers:{"Content-Type":"application/json"},params:{published:!0}};i("get-common-notifications-p").showLoading();try{const o=await s.request(e);l.value=o.data,g.value=o.data.notifications.filter(n=>m.getDateDiff(new Date,n.updatedAt,"days")<=6),l.value=o.data.notifications.filter(n=>m.getDateDiff(new Date,n.updatedAt,"days")>=7),i("get-common-notifications-p").hideLoading()}catch(o){console.log(o),i("get-common-notifications-p").hideLoading()}},last7DaysNotification:g,publishedNotification:l,getNotificationList:r,createNotification:async()=>{const e=t,o={method:"post",url:"api/common_notifications",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.value.token}`},data:e};i("post-common-notifications").showLoading();try{const n=await s.request(o);r(),d.value=!1,i("post-common-notifications").hideLoading(),c.create({position:"center",type:"positive",message:"Notification Created Successfully."})}catch(n){console.log(n),i("post-common-notifications").hideLoading(),c.create({position:"center",type:"negative",message:n.response.data.message})}},updateNotification:async()=>{const e=t,o={method:"put",url:"api/common_notifications/"+t.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.value.token}`},data:e};i("put-common-notifications").showLoading();try{const n=await s.request(o);r(),p.value=!1,i("put-common-notifications").hideLoading()}catch(n){console.log(n),c.create({position:"center",type:"negative",message:n.response.data.message}),i("put-common-notifications").hideLoading()}},deleteNotification:async()=>{const e={method:"delete",url:"api/common_notifications/"+t.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.value.token}`}};i("delete-common-notifications").showLoading();try{const o=await s.request(e);r(),i("delete-common-notifications").hideLoading()}catch(o){console.log(o),i("delete-common-notifications").hideLoading(),c.create({position:"center",type:"negative",message:o.response.data.message})}}}});export{A as u};
