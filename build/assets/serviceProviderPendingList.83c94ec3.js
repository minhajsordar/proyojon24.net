import{G as $,aD as Y,u as T,m as B,r as g,bc as k,bd as s,be as C,Z as D,bf as z,a0 as M,dt as Q,F as U,o as F,a as S,d as b,e as t,f as p,q,B as i,A as I,K as N,bj as O,y as u,s as K,H as R,dr as E,a3 as w,x as _}from"./index.9c7f7a59.js";import{Q as V}from"./QMarkupTable.537cd0c8.js";import{u as G}from"./use-quasar.284cf7f0.js";import{u as H}from"./use-meta.fe522d9f.js";import"./QItemLabel.d0704860.js";import"./QSelect.9e4515c4.js";/* empty css                                                                   */import{u as Z}from"./pendingForApprovalListCountStore.86704a67.js";import"./QChip.561196ba.js";import"./position-engine.f3b41267.js";$("proyojonuserkey",{});const j=$("proyojonloginuser",{});k.title="Requesting To Server...";const x=Y("service provider pending store",()=>{const f=Z();T(),B(),g(1),g(1);const a=g([]),d=g(!1),n=async()=>{const l={method:"get",url:"api/service_providers/pending_list",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.value.token}`}};s("get-service-providers-pendinglist").showLoading(),d.value=!0;try{const r=await C.request(l);a.value=r.data,d.value=!1,s("get-service-providers-pendinglist").hideLoading()}catch(r){console.log(r),d.value=!1,s("get-service-providers-pendinglist").hideLoading()}};return{serviceProviderPendingList:a,serviceProviderPendingListLoading:d,getServiceProviderPendingList:n,approveServiceProviderProfile:async(l,r)=>{const v={method:"patch",url:"api/service_providers/"+l,headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.value.token}`},data:{approved:!0,dataCollectorId:r}};s("patch-service-providers").showLoading();try{const c=await C.request(v);n(),s("patch-service-providers").hideLoading(),f.getPendingCount()}catch(c){console.log(c),s("patch-service-providers").hideLoading(),D.create({position:"center",type:"negative",message:c}),k.hideLoader()}},rejectServiceProviderProfile:async(l,r,v)=>{const c={method:"patch",url:"api/service_providers/"+l,headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.value.token}`},data:{rejected:!0,rejectNote:v,dataCollectorId:r}};s("patch-service-providers").showLoading();try{const m=await C.request(c);n(),s("patch-service-providers").hideLoading(),f.getPendingCount()}catch(m){console.log(m),s("patch-service-providers").hideLoading(),D.create({position:"center",type:"negative",message:m}),k.hideLoader()}}}}),J={class:"container-section-py-xs"},W={class:"inner-section"},X={class:"full-width"},ee={class:"fs-18"},te={class:"bg-blue-grey-2"},ue={__name:"serviceProviderPendingList",setup(f){const a=x();a.getServiceProviderPendingList(),$("proyojonloginuser",{});const d=T(),n=B(),y=G(),{t:P}=z(),l=M();Q(l);const r=U();g("self");const v=(e,h)=>{y.dialog({title:P("confirm"),message:"Are you sure to approved this?",cancel:!0,persistent:!0}).onOk(()=>{a.approveServiceProviderProfile(e,h),console.log(">>>> OK")})},c=(e,h)=>{y.dialog({title:P("reject"),message:"Are you sure to reject this?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(o=>{a.rejectServiceProviderProfile(e,h,o),console.log(">>>> OK",o)})};return F(()=>{var e;n.checkLogin(),["superAdmin","admin","district","division","subDistrict","union"].includes((e=n==null?void 0:n.loginUserInfo)==null?void 0:e.permission)||d.push("/profile")}),H({title:"User List",titleTemplate:e=>`${e} - Proyojon24.net`,meta:{description:{name:"description",content:"Page 1"},keywords:{name:"keywords",content:"proyojon24 services service-provider"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},ogTitle:{property:"og:title",template(e){return`${e} - Proyojon24.net`}}}}),(e,h)=>(S(),b("div",J,[t("div",W,[t("div",X,[p(K,{class:"border-primary q-pa-md"},{default:q(()=>[t("div",null,[t("div",ee,i(e.$t("headermenus.pending_list")),1),p(I,{class:"q-my-sm"}),p(V,{flat:"",bordered:"",separator:"cell",class:"text-left"},{default:q(()=>[t("thead",te,[t("tr",null,[t("th",null,i(e.$t("serial")),1),t("th",null,i(e.$t("name")),1),t("th",null,i(e.$t("datetime")),1),t("th",null,i(e.$t("action")),1)])]),t("tbody",null,[(S(!0),b(N,null,O(u(a).serviceProviderPendingList,(o,L)=>(S(),b("tr",{key:L,class:R({"bg-blue-grey-1":L%2!=0})},[t("td",null,i(u(E)(String(L+1),u(r).language)),1),t("td",null,i(o.name[u(r).language]),1),t("td",null,[t("p",null," Created At: "+i(u(w).formatDate(o.createdAt,"YYYY-MM-DD")),1),t("p",null," Updated At: "+i(u(w).formatDate(o.updatedAt,"YYYY-MM-DD")),1)]),t("td",null,[p(_,{class:"q-ml-xs",label:e.$t("preview"),size:"sm",dense:"",color:"blue-grey-10",onClick:A=>e.$router.push("/service_provider_preview/"+o._id)},null,8,["label","onClick"]),p(_,{class:"q-ml-xs",label:e.$t("approved"),size:"sm",dense:"",color:"positive",onClick:A=>v(o._id,o.dataCollector)},null,8,["label","onClick"]),p(_,{class:"q-ml-xs",label:e.$t("reject"),size:"sm",dense:"",color:"negative",onClick:A=>c(o._id,o.dataCollector)},null,8,["label","onClick"])])],2))),128))])]),_:1})])]),_:1})])])]))}};export{ue as default};
