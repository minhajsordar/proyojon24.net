import{Q as k}from"./QImg.dc448589.js";import{t as w,H as L,ai as B,v as b,C as a,x as u,N as d,a as n,d as g,e as i,M as I,O as C,z as r,J as h,L as f,P as m,f as _,K as $,D as j}from"./index.764ef670.js";import{Q as U}from"./QFile.add5521b.js";import{w as D}from"./root_url.456ded4c.js";import"./QChip.69fc23be.js";b.title="Requesting To Server...";const z=w("public slider create Update store",()=>{const c=L(),e=B({id:"",slider1:[],slider2:[],slider3:[],slider4:[]});return{getSliderData:async()=>{const s={method:"get",url:"api/sliders",headers:{"Content-Type":"application/json"}};a("get-image-sliders").showLoading();try{const t=await u.request(s);e.id=t.data[0]._id,e.slider1=t.data[0].slider1,e.slider2=t.data[0].slider2,e.slider3=t.data[0].slider3,e.slider4=t.data[0].slider4,a("get-image-sliders").hideLoading()}catch(t){a("get-image-sliders").hideLoading(),console.log(t)}},sliderInfo:e,createSliders:async()=>{const s={...e},t={method:"post",url:"api/sliders",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.loginUserInfo.token}`},data:s};a("post-sliders").showLoading();try{const l=await u.request(t);a("post-sliders").hideLoading(),d.create({message:"Successfully Created Banner Image"})}catch(l){console.log(l),a("post-sliders").hideLoading(),d.create({message:"Failed to Create Banner Image"})}},updateSlider:async()=>{const s={...e},t={method:"put",url:"api/sliders/"+e.id,headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.loginUserInfo.token}`},data:s};a("put-sliders").showLoading();try{const l=await u.request(t);a("put-sliders").hideLoading(),d.create({message:"Successfully Updated Banner Image",type:"positive",position:"center"})}catch(l){console.log(l),a("put-sliders").hideLoading()}},uploadSliderImage:async(s,t)=>{if(!e[s][t]||typeof e[s][t]=="string")return;const l={method:"post",url:"api/upload",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${c.loginUserInfo.token}`},data:{image:e[s][t]}};a("upload-image-sliders").showLoading();try{const p=await u.request(l);e[s][t]=p.data,a("upload-image-sliders").hideLoading()}catch(p){console.log(p),a("upload-image-sliders").hideLoading(),d.create({position:"center",type:"negative",message:p.response.data.message})}}}}),q={class:"container-section-py-xs"},A={class:"inner-section"},Q={class:"full-width"},V={class:"fs-16"},T={class:"row q-col-gutter-sm"},F={class:"fs-10"},N={key:0,class:"border-primary border-radius-sm q-pa-sm"},E={class:"flex justify-between"},R={class:"flex justify-end"},O={__name:"sliderController",setup(c){const e=z();e.getSliderData();const y=S=>{d.create({position:"center",type:"negative",message:"Choosen file size too big"})};return(S,v)=>(n(),g("div",q,[i("div",A,[i("div",Q,[(n(),g(I,null,C(4,o=>i("div",{key:o},[i("div",V,"Slider Images For Banner "+m(o),1),i("div",T,[(n(),g(I,null,C(10,s=>i("div",{class:"col-md-6 col-sm-6 col-12",key:s},[i("div",F," Banner "+m(o)+" image "+m(s),1),typeof r(e).sliderInfo[`slider${o}`][s-1]=="string"?(n(),g("div",N,[_(k,{src:r(D)+"/"+r(e).sliderInfo[`slider${o}`][s-1],width:"300px"},null,8,["src"]),i("div",E,[i("div",null,m(r(e).sliderInfo[`slider${o}`][s-1]),1),_(f,{class:"bg-red text-white",dense:"",size:"xs",icon:"edit",onClick:t=>r(e).sliderInfo[`slider${o}`][s-1]=null},null,8,["onClick"])])])):(n(),h(U,{key:1,outlined:"",ref_for:!0,ref:"slider1Img1El",dense:"",modelValue:r(e).sliderInfo[`slider${o}`][s-1],"onUpdate:modelValue":[t=>r(e).sliderInfo[`slider${o}`][s-1]=t,()=>{r(e).uploadSliderImage(`slider${o}`,s-1)}],label:"Add image Max Size 150KB",accept:".jpg, .png, .jpeg","max-total-size":"150000",counter:"",onRejected:y},{prepend:$(()=>[_(j,{name:"cloud_upload"})]),_:2},1032,["modelValue","onUpdate:modelValue"]))])),64))])])),64)),i("div",R,[r(e).sliderInfo.id?(n(),h(f,{key:1,label:"Update",onClick:r(e).updateSlider},null,8,["onClick"])):(n(),h(f,{key:0,label:"Create",onClick:r(e).createSliders},null,8,["onClick"]))])])])]))}};export{O as default};
